<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { background: #0f1028; color: white; font-family: 'Poppins', sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 600px; }
        h2 { text-align: center; color: #FFD700; margin-bottom: 20px; }
        
        /* Accordion Style */
        .section { background: #2a2d6e; border-radius: 8px; margin-bottom: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .section-header { padding: 15px; background: rgba(0,0,0,0.2); cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; align-items: center; }
        .section-header:hover { background: rgba(255,255,255,0.05); }
        .section-content { padding: 15px; display: none; }
        .section-content.active { display: block; }
        
        label { font-size: 0.85rem; color: #cfcfcf; display: block; margin-top: 10px; }
        input { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.2); color: white; outline: none; }
        input:focus { border-color: #00c853; }
        
        .btn-save { width: 100%; padding: 12px; background: #00c853; border: none; color: white; font-weight: bold; border-radius: 5px; cursor: pointer; margin-top: 15px; }
        .btn-save:hover { background: #009624; }
        
        .subtitle { color: #FFD700; margin-top: 15px; font-size: 0.9rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 2px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>⚙️ Master Admin Panel</h2>

        <!-- 1. General & Logo -->
        <div class="section">
            <div class="section-header" onclick="toggle(this)">1. General & Logo <span>▼</span></div>
            <div class="section-content">
                <label>Main Profile Logo URL:</label>
                <input type="text" id="logo">
                <button class="btn-save" onclick="saveGeneral()">Save General Info</button>
            </div>
        </div>

        <!-- 2. Slider -->
        <div class="section">
            <div class="section-header" onclick="toggle(this)">2. Image Slider <span>▼</span></div>
            <div class="section-content">
                <label>Image 1 URL:</label><input type="text" id="img1">
                <label>Image 2 URL:</label><input type="text" id="img2">
                <label>Image 3 URL:</label><input type="text" id="img3">
                <label>Image 4 URL:</label><input type="text" id="img4">
                <button class="btn-save" onclick="saveSlider()">Save Slider</button>
            </div>
        </div>

        <!-- 3. Contact Links -->
        <div class="section">
            <div class="section-header" onclick="toggle(this)">3. Contact Links <span>▼</span></div>
            <div class="section-content">
                <label>WhatsApp 1 Link:</label><input type="text" id="wa1">
                <label>WhatsApp 2 Link:</label><input type="text" id="wa2">
                <label>Call 1 (tel:number):</label><input type="text" id="call1">
                <label>Call 2 (tel:number):</label><input type="text" id="call2">
                <label>Telegram Link:</label><input type="text" id="tg">
                <label>Email Link (mailto:):</label><input type="text" id="email">
                <label>Facebook Link:</label><input type="text" id="fb">
                <label>YouTube Link:</label><input type="text" id="yt">
                <label>Support Video Link:</label><input type="text" id="vid">
                <button class="btn-save" onclick="saveLinks()">Save Links</button>
            </div>
        </div>

        <!-- 4. Bank Details -->
        <div class="section">
            <div class="section-header" onclick="toggle(this)">4. Bank Details <span>▼</span></div>
            <div class="section-content">
                <div class="subtitle">Bank of Ceylon (BOC)</div>
                <input type="text" id="boc_acc" placeholder="Account Number">
                <input type="text" id="boc_name" placeholder="Account Name">
                <input type="text" id="boc_branch" placeholder="Branch">

                <div class="subtitle">People's Bank</div>
                <input type="text" id="peo_acc" placeholder="Account Number">
                <input type="text" id="peo_name" placeholder="Account Name">
                <input type="text" id="peo_branch" placeholder="Branch">

                <div class="subtitle">NSB</div>
                <input type="text" id="nsb_acc" placeholder="Account Number">
                <input type="text" id="nsb_name" placeholder="Account Name">
                <input type="text" id="nsb_branch" placeholder="Branch">

                <div class="subtitle">Sampath</div>
                <input type="text" id="samp_acc" placeholder="Account Number">
                <input type="text" id="samp_name" placeholder="Account Name">
                <input type="text" id="samp_branch" placeholder="Branch">

                <div class="subtitle">iPay</div>
                <input type="text" id="ipay_acc" placeholder="Mobile Number">
                <input type="text" id="ipay_name" placeholder="Name">

                <div class="subtitle">Ez Cash</div>
                <input type="text" id="ez_acc" placeholder="Mobile Number">
                <input type="text" id="ez_name" placeholder="Name">

                <div class="subtitle">Binance</div>
                <input type="text" id="bin_acc" placeholder="ID">
                
                <button class="btn-save" onclick="saveBanks()">Save Banks</button>
            </div>
        </div>

        <!-- 5. Withdrawal Details -->
        <div class="section">
            <div class="section-header" onclick="toggle(this)">5. Withdrawal Details <span>▼</span></div>
            <div class="section-content">
                <div class="subtitle">1xBet</div>
                <input type="text" id="x_city" placeholder="City">
                <input type="text" id="x_st" placeholder="Street">
                
                <div class="subtitle">Melbet</div>
                <input type="text" id="mel_city" placeholder="City">
                <input type="text" id="mel_st" placeholder="Street">

                <div class="subtitle">Winwin</div>
                <input type="text" id="win_city" placeholder="City">
                <input type="text" id="win_st" placeholder="Street">

                <div class="subtitle">888Starz</div>
                <input type="text" id="e_city" placeholder="City">
                <input type="text" id="e_st" placeholder="Street">

                <div class="subtitle">GoldPari</div>
                <input type="text" id="gold_city" placeholder="City">
                <input type="text" id="gold_st" placeholder="Street">

                <div class="subtitle">Dbbet</div>
                <input type="text" id="db_city" placeholder="City">
                <input type="text" id="db_st" placeholder="Street">

                <div class="subtitle">Mostbet</div>
                <input type="text" id="most_city" placeholder="City">
                <input type="text" id="most_st" placeholder="Street">

                <div class="subtitle">PariPulse</div>
                <input type="text" id="pari_city" placeholder="City">
                <input type="text" id="pari_st" placeholder="Street">

                <div class="subtitle">Coldbet</div>
                <input type="text" id="cold_city" placeholder="City">
                <input type="text" id="cold_st" placeholder="Street">

                <div class="subtitle">Linebet</div>
                <input type="text" id="line_city" placeholder="City">
                <input type="text" id="line_st" placeholder="Street">

                <button class="btn-save" onclick="saveWithdraw()">Save Withdrawal Info</button>
            </div>
        </div>

    </div>

    <script>
        function toggle(header) {
            const content = header.nextElementSibling;
            content.classList.toggle('active');
        }
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getDatabase, ref, update, get } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

        const firebaseConfig = { apiKey: "AIzaSyAFQWGtRwfsvAM_nzdjP-tDsIkDNFwP14o", authDomain: "ranja-4b403.firebaseapp.com", databaseURL: "https://ranja-4b403-default-rtdb.firebaseio.com", projectId: "ranja-4b403", storageBucket: "ranja-4b403.firebasestorage.app", messagingSenderId: "139277942382", appId: "1:139277942382:web:451dcd708dacb2616d307f", measurementId: "G-55BDLL4EHP" };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Load Data
        get(ref(db)).then((snapshot) => {
            const data = snapshot.val();
            if(data) {
                // Logo
                if(data.appData) document.getElementById('logo').value = data.appData.logo || "";
                // Slider
                if(data.sliderImages) {
                    ['img1','img2','img3','img4'].forEach(k => document.getElementById(k).value = data.sliderImages[k] || "");
                }
                // Links
                if(data.links) {
                    ['wa1','wa2','call1','call2','tg','email','fb','yt','vid'].forEach(k => document.getElementById(k).value = data.links[k] || "");
                }
                // Banks
                if(data.banks) {
                    for(let k in data.banks) { if(document.getElementById(k)) document.getElementById(k).value = data.banks[k]; }
                }
                // Withdraw
                if(data.withdraw) {
                    for(let k in data.withdraw) { if(document.getElementById(k)) document.getElementById(k).value = data.withdraw[k]; }
                }
            }
        });

        // Save Functions
        window.saveGeneral = () => {
            update(ref(db, 'appData'), { logo: document.getElementById('logo').value }).then(()=>alert('Saved!'));
        };

        window.saveSlider = () => {
            update(ref(db, 'sliderImages'), {
                img1: document.getElementById('img1').value,
                img2: document.getElementById('img2').value,
                img3: document.getElementById('img3').value,
                img4: document.getElementById('img4').value
            }).then(()=>alert('Saved!'));
        };

        window.saveLinks = () => {
            update(ref(db, 'links'), {
                wa1: document.getElementById('wa1').value,
                wa2: document.getElementById('wa2').value,
                call1: document.getElementById('call1').value,
                call2: document.getElementById('call2').value,
                tg: document.getElementById('tg').value,
                email: document.getElementById('email').value,
                fb: document.getElementById('fb').value,
                yt: document.getElementById('yt').value,
                vid: document.getElementById('vid').value
            }).then(()=>alert('Saved!'));
        };

        window.saveBanks = () => {
            let updates = {};
            const fields = ['boc_acc','boc_name','boc_branch','peo_acc','peo_name','peo_branch','nsb_acc','nsb_name','nsb_branch','samp_acc','samp_name','samp_branch','ipay_acc','ipay_name','ez_acc','ez_name','bin_acc'];
            fields.forEach(f => updates[f] = document.getElementById(f).value);
            update(ref(db, 'banks'), updates).then(()=>alert('Saved!'));
        };

        window.saveWithdraw = () => {
            let updates = {};
            const fields = ['x_city','x_st','mel_city','mel_st','win_city','win_st','e_city','e_st','gold_city','gold_st','db_city','db_st','most_city','most_st','pari_city','pari_st','cold_city','cold_st','line_city','line_st'];
            fields.forEach(f => updates[f] = document.getElementById(f).value);
            update(ref(db, 'withdraw'), updates).then(()=>alert('Saved!'));
        };
    </script>
</body>
</html>
